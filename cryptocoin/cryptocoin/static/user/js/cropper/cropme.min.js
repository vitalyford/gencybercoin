function previewFile(c){var d=document.getElementById(c.name+"Preview");var b=document.getElementsByName(c.name)[0].files[0];var a=new FileReader();a.onloadend=function(){d.src=a.result};if(b){a.readAsDataURL(b);var e=c.name.replace("image","");document.getElementById("cropme"+e).disabled=false;document.getElementById("tooltip"+e).dataset.originalTitle="Crop the image"}else{d.src=""}}var $modal=$("#modal");var cropper;var avatar;var name;function cropMe(g){name=g.id.replace("cropme","");avatar=document.getElementById("image"+name+"Preview");var h=document.getElementById("image");var c=document.getElementById("image"+name);var f=c.files;var b=function(i){h.src=i;$modal.modal("show")};var a;var e;var d;if(f&&f.length>0){e=f[0];if(URL){b(URL.createObjectURL(e))}else{if(FileReader){a=new FileReader();a.onload=function(i){b(a.result)};a.readAsDataURL(e)}}}}window.addEventListener("DOMContentLoaded",function(){var b=document.getElementsByName("cropmenow");var a=b.length;for(var c=0;c<a;c++){b[c].disabled=true}$('[data-toggle="tooltip"]').tooltip({trigger:"hover"});$modal.on("shown.bs.modal",function(){cropper=new Cropper(image,{viewMode:2,minCropBoxWidth:50,minCropBoxHeight:50,});$(".js-zoom-in").click(function(){cropper.zoom(0.1)});$(".js-zoom-out").click(function(){cropper.zoom(-0.1)})}).on("hidden.bs.modal",function(){cropper.destroy();cropper=null});document.getElementById("crop").addEventListener("click",function(){var e;var d;$modal.modal("hide");if(cropper){d=cropper.getCroppedCanvas({width:160,height:160,});e=avatar.src;avatar.src=d.toDataURL();var f=cropper.getData(true);document.getElementById("inputX"+name).value=f.x;document.getElementById("inputY"+name).value=f.y;document.getElementById("inputWidth"+name).value=f.width;document.getElementById("inputHeight"+name).value=f.height}})});